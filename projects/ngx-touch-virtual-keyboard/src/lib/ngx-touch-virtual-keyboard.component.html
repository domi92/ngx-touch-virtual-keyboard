<div class="keyboard-wrapper">
  <div class="keyboard" [@slideInOut]="isOpen ? 'in' : 'out'">
    <div class="keyboard-row">
      <div class="keyboard-input">{{textInput }}</div>
    </div>
    <ng-container *ngIf="!isNumericOnly && keyboardLayout">
      <ng-container *ngTemplateOutlet="content; context: {data: keyboardLayout}"></ng-container>
    </ng-container>
    <ng-container *ngIf="isNumericOnly">
      <ng-container *ngTemplateOutlet="content; context: {data: numericOnlyLayout}"></ng-container>
    </ng-container>
  </div>
</div>

<button class="toggle-button keyboard-key-icon" (click)="toggleKeyboard()">
  <img [src]="iconKeyboard" alt="keyboard" />
  <!-- Font Awesome keyboard icon -->
</button>

<ng-template #content let-data="data">
  <div *ngFor="let row of data" class="keyboard-row">
    <ng-container *ngFor="let key of row">
      <button *ngIf="key === 'delete'; else left" class="keyboard-key keyboard-key-icon" appRepeatAction (repeatAction)="emitDeletePressed()">
        <img [src]="iconDelete" alt="Delete" />
      </button>
      <ng-template #left >
        <button *ngIf="key === 'left'; else right" class="keyboard-key keyboard-key-icon" (click)="moveCursorLeft()">
          <img [src]="left" alt="left" />
        </button>
      </ng-template>
      <ng-template #right >
        <button *ngIf="key === 'right'; else shift" class="keyboard-key keyboard-key-icon">
          <img [src]="right" alt="right" />
        </button>
      </ng-template>
      <ng-template #shift >
        <button *ngIf="key === 'shift'; else space" class="keyboard-key keyboard-key-icon">
          <img [src]="shift" alt="shift" />
        </button>
      </ng-template>
      <ng-template #space >
        <button *ngIf="key === 'space'; else standardKey" class="keyboard-key keyboard-key-icon keyboard-space" appRepeatAction (repeatAction)="pressKey(' ')">
          <img [src]="space" alt="space" />
        </button>
      </ng-template>
      <ng-template #standardKey>
        <button class="keyboard-key" appRepeatAction (repeatAction)="pressKey(key)">{{ key }}</button>
      </ng-template>
    </ng-container>
  </div>
</ng-template>
